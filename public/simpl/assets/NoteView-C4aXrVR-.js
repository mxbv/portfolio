import{_ as c,c as a,a as o,o as r,r as v,n as N,i as L,p as $,q as C,d as w,b as i,v as h,s as m,g as I,e as V,l as D}from"./index-CMN5nVKj.js";import{s as T,d as k,g as U}from"./db-CyDEoqJs.js";const E={},R={width:"26",height:"26",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function j(u,n){return r(),a("svg",R,n[0]||(n[0]=[o("path",{d:"M21 12H3M3 12L10 5M3 12L10 19",stroke:"#ffffff","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))}const H=c(E,[["render",j]]),F={},O={width:"26",height:"26",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function q(u,n){return r(),a("svg",O,n[0]||(n[0]=[o("path",{d:"M12 3V17M12 17L6 11M12 17L18 11M3 21H21",stroke:"#ffffff","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))}const A=c(F,[["render",q]]),G={},S={width:"26",height:"26",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Z(u,n){return r(),a("svg",S,n[0]||(n[0]=[o("path",{d:"M9 3H15M3 6H21M10 16V11M14 16V11M5 6H19L18.1245 19.133C18.0544 20.1836 17.1818 21 16.1289 21L7.8461 21C6.79171 21 5.91842 20.1814 5.85028 19.1292L5 6Z",stroke:"#ffffff","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))}const z=c(G,[["render",Z]]),J={key:0,class:"note"},K={class:"note-container"},P={class:"note-header"},Q={class:"note-header-right"},W={key:1,class:"hint"},X={__name:"NoteView",emits:["noteDeleted","refreshNotes"],setup(u,{emit:n}){const d=n,x=N(),_=D(),g=v(parseInt(x.params.id)),t=v(null),b=v([]);let f=null;L(()=>{f=setInterval(()=>{t.value&&T(t.value)},200)}),$(()=>{clearInterval(f)}),C(async()=>{const l=await U();t.value=l.find(e=>e.id===g.value)||null});const y=async()=>{t.value&&window.confirm("Are you sure you want to delete this record ?")&&(clearInterval(f),await k(t.value.id),t.value=null,d("noteDeleted"),d("refreshNotes"),_.replace("/"))},B=()=>{if(!t.value)return;const l=`${(t.value.title||"Empty").toUpperCase()} | ${t.value.date}

${t.value.content||"Empty"}`,e=new Blob([l],{type:"text/plain; charset=utf-8"}),s=document.createElement("a");s.href=URL.createObjectURL(e),s.download="note.txt",s.click(),URL.revokeObjectURL(s.href)},M=async()=>{!t.value.title&&!t.value.content&&await k(t.value.id),_.replace("/"),d("refreshNotes")};return(l,e)=>{const s=V("router-link");return t.value?(r(),a("div",J,[o("div",K,[o("div",P,[o("button",{onClick:M,class:"button go-back-button",title:"Go Back"},[i(H)]),o("div",Q,[o("button",{class:"button export-button",type:"button",title:"Export",onClick:B},[i(A)]),o("button",{onClick:y,class:"button delete-button",title:"Delete"},[i(z)])])]),w(o("input",{"onUpdate:modelValue":e[0]||(e[0]=p=>t.value.title=p),placeholder:"Title",class:"note-input note-title",ref:"titleTextarea",type:"text",maxlength:"100"},null,512),[[h,t.value.title]]),w(o("textarea",{"onUpdate:modelValue":e[1]||(e[1]=p=>t.value.content=p),placeholder:"Tell a new story...",class:"note-input note-text",ref_key:"contentTextarea",ref:b,maxlength:"30000"},null,512),[[h,t.value.content]])])])):(r(),a("div",W,[e[3]||(e[3]=m(" Note not found ")),i(s,{to:"/",class:"button"},{default:I(()=>e[2]||(e[2]=[m("Back to main page")])),_:1})]))}}},et=c(X,[["__scopeId","data-v-b8f50cf3"]]);export{et as default};
