import{_ as c,c as s,a as e,o as r,r as h,l as M,k as N,m as B,n as $,e as f,d as p,v as _,u as C}from"./index-DjmwuN4n.js";import{s as I,d as w,g as U}from"./db-CyDEoqJs.js";const D={},E={xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-left"};function R(i,n){return r(),s("svg",E,n[0]||(n[0]=[e("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null,-1),e("path",{d:"M5 12l14 0"},null,-1),e("path",{d:"M5 12l6 6"},null,-1),e("path",{d:"M5 12l6 -6"},null,-1)]))}const T=c(D,[["render",R]]),z={},V={xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"icon icon-tabler icons-tabler-outline icon-tabler-download"};function j(i,n){return r(),s("svg",V,n[0]||(n[0]=[e("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null,-1),e("path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"},null,-1),e("path",{d:"M7 11l5 5l5 -5"},null,-1),e("path",{d:"M12 4l0 12"},null,-1)]))}const L=c(z,[["render",j]]),H={},F={xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",viewBox:"0 0 24 24",fill:"currentColor",class:"icon icon-tabler icons-tabler-filled icon-tabler-trash-x"};function O(i,n){return r(),s("svg",F,n[0]||(n[0]=[e("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null,-1),e("path",{d:"M20 6a1 1 0 0 1 .117 1.993l-.117 .007h-.081l-.919 11a3 3 0 0 1 -2.824 2.995l-.176 .005h-8c-1.598 0 -2.904 -1.249 -2.992 -2.75l-.005 -.167l-.923 -11.083h-.08a1 1 0 0 1 -.117 -1.993l.117 -.007h16zm-9.489 5.14a1 1 0 0 0 -1.218 1.567l1.292 1.293l-1.292 1.293l-.083 .094a1 1 0 0 0 1.497 1.32l1.293 -1.292l1.293 1.292l.094 .083a1 1 0 0 0 1.32 -1.497l-1.292 -1.293l1.292 -1.293l.083 -.094a1 1 0 0 0 -1.497 -1.32l-1.293 1.292l-1.293 -1.292l-.094 -.083z"},null,-1),e("path",{d:"M14 2a2 2 0 0 1 2 2a1 1 0 0 1 -1.993 .117l-.007 -.117h-4l-.007 .117a1 1 0 0 1 -1.993 -.117a2 2 0 0 1 1.85 -1.995l.15 -.005h4z"},null,-1)]))}const A=c(H,[["render",O]]),S={key:0,class:"note"},q={class:"note-container"},G={class:"note-header"},J={class:"note-header-right"},K={key:1},P={__name:"NoteView",emits:["noteDeleted","refreshNotes"],setup(i,{emit:n}){const u=n,m=M(),v=C(),x=h(parseInt(m.params.id)),t=h(null),b=h([]);let d=null;N(()=>{d=setInterval(()=>{t.value&&I(t.value)},200)}),B(()=>{clearInterval(d)}),$(async()=>{const a=await U();t.value=a.find(o=>o.id===x.value)||null});const k=async()=>{t.value&&window.confirm("Are you sure you want to delete this record ?")&&(clearInterval(d),await w(t.value.id),t.value=null,u("noteDeleted"),u("refreshNotes"),v.replace("/"))},g=()=>{if(!t.value)return;const a=`${(t.value.title||"Empty").toUpperCase()} | ${t.value.date}

${t.value.content||"Empty"}`,o=new Blob([a],{type:"text/plain; charset=utf-8"}),l=document.createElement("a");l.href=URL.createObjectURL(o),l.download="note.txt",l.click(),URL.revokeObjectURL(l.href)},y=async()=>{!t.value.title&&!t.value.content&&await w(t.value.id),v.replace("/"),u("refreshNotes")};return(a,o)=>t.value?(r(),s("div",S,[e("div",q,[e("div",G,[e("button",{onClick:y,class:"note-button go-back-button"},[p(T)]),e("div",J,[e("button",{class:"note-button export-button",type:"button",title:"Export",onClick:g},[p(L)]),e("button",{onClick:k,class:"note-button delete-button"},[p(A)])])]),f(e("input",{"onUpdate:modelValue":o[0]||(o[0]=l=>t.value.title=l),placeholder:"Title",class:"note-input note-title",ref:"titleTextarea",type:"text",maxlength:"100"},null,512),[[_,t.value.title]]),f(e("textarea",{"onUpdate:modelValue":o[1]||(o[1]=l=>t.value.content=l),placeholder:"Tell a new story...",class:"note-input note-text",ref_key:"contentTextarea",ref:b,maxlength:"30000"},null,512),[[_,t.value.content]])])])):(r(),s("div",K,o[2]||(o[2]=[e("p",null,"Record not found",-1)])))}},X=c(P,[["__scopeId","data-v-bcf2c718"]]);export{X as default};
