import{_ as i,c as a,a as t,o as r,r as f,n as M,l as B,p as N,q as L,d as w,b as p,v as _,u as $}from"./index-B127gl1O.js";import{s as I,d as h,g as V}from"./db-CyDEoqJs.js";const C={},D={width:"26",height:"26",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function U(c,o){return r(),a("svg",D,o[0]||(o[0]=[t("path",{d:"M21 12H3M3 12L10 5M3 12L10 19",stroke:"#ffffff","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))}const E=i(C,[["render",U]]),R={},T={width:"26",height:"26",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function j(c,o){return r(),a("svg",T,o[0]||(o[0]=[t("path",{d:"M12 3V17M12 17L6 11M12 17L18 11M3 21H21",stroke:"#ffffff","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))}const H=i(R,[["render",j]]),F={},O={width:"26",height:"26",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function q(c,o){return r(),a("svg",O,o[0]||(o[0]=[t("path",{d:"M9 3H15M3 6H21M10 16V11M14 16V11M5 6H19L18.1245 19.133C18.0544 20.1836 17.1818 21 16.1289 21L7.8461 21C6.79171 21 5.91842 20.1814 5.85028 19.1292L5 6Z",stroke:"#ffffff","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))}const A=i(F,[["render",q]]),G={key:0,class:"note"},S={class:"note-container"},Z={class:"note-header"},z={key:1},J={__name:"NoteView",emits:["noteDeleted","refreshNotes"],setup(c,{emit:o}){const u=o,m=M(),v=$(),k=f(parseInt(m.params.id)),e=f(null),x=f([]);let d=null;B(()=>{d=setInterval(()=>{e.value&&I(e.value)},200)}),N(()=>{clearInterval(d)}),L(async()=>{const l=await V();e.value=l.find(n=>n.id===k.value)||null});const g=async()=>{e.value&&window.confirm("Are you sure you want to delete this record ?")&&(clearInterval(d),await h(e.value.id),e.value=null,u("noteDeleted"),u("refreshNotes"),v.replace("/"))},b=()=>{if(!e.value)return;const l=`${(e.value.title||"Empty").toUpperCase()} | ${e.value.date}

${e.value.content||"Empty"}`,n=new Blob([l],{type:"text/plain; charset=utf-8"}),s=document.createElement("a");s.href=URL.createObjectURL(n),s.download="note.txt",s.click(),URL.revokeObjectURL(s.href)},y=async()=>{!e.value.title&&!e.value.content&&await h(e.value.id),v.replace("/"),u("refreshNotes")};return(l,n)=>e.value?(r(),a("div",G,[t("div",S,[t("div",Z,[t("button",{onClick:y,class:"note-button go-back-button",title:"Go Back"},[p(E)]),t("button",{class:"note-button export-button",type:"button",title:"Export",onClick:b},[p(H)]),t("button",{onClick:g,class:"note-button delete-button",title:"Delete"},[p(A)])]),w(t("input",{"onUpdate:modelValue":n[0]||(n[0]=s=>e.value.title=s),placeholder:"Title",class:"note-input note-title",ref:"titleTextarea",type:"text",maxlength:"100"},null,512),[[_,e.value.title]]),w(t("textarea",{"onUpdate:modelValue":n[1]||(n[1]=s=>e.value.content=s),placeholder:"Tell a new story...",class:"note-input note-text",ref_key:"contentTextarea",ref:x,maxlength:"30000"},null,512),[[_,e.value.content]])])])):(r(),a("div",z,n[2]||(n[2]=[t("p",null,"Record not found",-1)])))}},Q=i(J,[["__scopeId","data-v-1879dcaf"]]);export{Q as default};
